---
categories:
- ğŸ‘©â€ğŸ’» Today I learn
- JPA
  
tags:
- JPA
- JPQL
---

### â“**JPQLì´ë€?**

---

- JPQL (Java Persistence Query Language)ëŠ” SQLê³¼ ìœ ì‚¬í•˜ì§€ë§Œ ê°ì²´ ì§€í–¥ì ìœ¼ë¡œ ì„¤ê³„ëœ ì¿¼ë¦¬ ì–¸ì–´
- ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ë©°, ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©

### âœ… **JPQLê³¼ ì¼ë°˜ SQLì˜ ì°¨ì´ì **

---

1. **`SELECT *` ì‚¬ìš©**
    - JPQLì—ì„œ `SELECT *`ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê³  ì—”í‹°í‹°ì™€ í•„ë“œ ì´ë¦„ì„ ì‚¬ìš©í•¨
        - `SELECT Review FROM Review` : `Review` ì—”í‹°í‹°ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ì˜ˆ
        - `SELECT r FROM Review r` : `Review` ì—”í‹°í‹°ì— ëŒ€í•´ ë³„ì¹­ `r`ì„ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ê°„ê²°í•˜ê²Œ ì‘ì„±
2. **ë³€ìˆ˜ ë°”ì¸ë”©**
    - JPQLì—ì„œëŠ” SQLê³¼ ë‹¬ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ `:` ê¸°í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°”ì¸ë”©í•¨
    - ì˜ëª»ëœ ì˜ˆ: `SELECT * FROM Review WHERE bookId = bookId AND id = id`
    - ì˜¬ë°”ë¥¸ ì˜ˆ: `SELECT r FROM Review r WHERE r.book.id = :bookId AND r.id = :id`
    

### âœï¸ **JPQL ì‚¬ìš©ë²•**

---

*íŠ¹ì • `bookId`ì™€ `reviewId`ë¥¼ ë§Œì¡±í•˜ëŠ” `Review` ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•˜ëŠ” ì˜ˆì‹œ*

**ğŸ“ Entity**

---

```java
@Entity
@Getter
@Setter
@AllArgsConstructor
@NoArgsConstructor
public class Review {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String content;
    @ManyToOne
    @JoinColumn(name = "bookId")  // ì™¸ë˜í‚¤ ì´ë¦„ì„ 'bookId'ë¡œ ì„¤ì •
    private Book book;
}
```

**ğŸ“Â Service**

---

```java
//bookId, reviewIdë¡œ íŠ¹ì • ë¦¬ë·° ê°€ì ¸ì˜¤ê¸°
public Optional<Review> getReview(Long bookId,Long reviewId){
    return reviewRepository.findContentByBookIdAndReviewId(bookId,reviewId);
}
```

**ğŸ“Â Repository**

---

```java
@Query("SELECT r FROM Review r WHERE r.book.id = :bookId AND r.id = :id")
Optional<Review> findContentByBookIdAndReviewId(@Param("bookId") Long bookId, @Param("id") Long id);
```